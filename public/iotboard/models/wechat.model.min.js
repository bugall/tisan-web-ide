/*! iot-board 2015-10-30 */
!function(){var a=function(a){$.ajax({url:"http://freeiot.pandocloud.com/api/device/status/current?identifier="+iotboard.identifier,crossDomain:!0,type:"get",success:function(b){console.log(b),0!=b.code&&alert(b.msg),a(b)}})},b=function(a,b){$.ajax({type:"post",url:"http://freeiot.pandocloud.com/api/device/status/current?identifier="+iotboard.identifier,crossDomain:!0,data:JSON.stringify(a),contentType:"application/json",success:function(a){console.log(a),0!=a.code&&alert(a.msg),b()}})};if(!window.iotboard)return void console.log("iotboard not initialized!");var c={};c.onWidgetStatusChanged=function(a,c,d){switch(a){case"motor":!function(){console.log(JSON.stringify(d));var a={};a[c]=[parseInt(d.speed)],console.log(a),b(a,function(a){console.log("responseData: "+a)})}();break;case"text":!function(){console.log(JSON.stringify(d));var a={};a[c]=[d.text],console.log(a),b(a,function(a){console.log("sendCommand callback...."),console.log("responseData: "+a)})}();break;case"plug":!function(){console.log("plug status changed:"+c),console.log(JSON.stringify(d));var a={};a[c]=d.on?[1]:[0],console.log(a),b(a,function(a){console.log("sendCommand callback...."),console.log("responseData: "+a)})}();break;case"default":!function(){console.log("defaultstatus changed:"+c),console.log(JSON.stringify(d));var a={};a[c]=[];for(var b in d)a[c].push(d[b]);console.log(a),window.pando.setCurrentStatus(a,function(a){console.log("sendCommand callback...."),console.log("responseData: "+JSON.stringify(a))})}();break;case"led":!function(){console.log("led status changed:"+c),console.log(JSON.stringify(d));var a={};a[c]=[d.red,d.green,d.blue],console.log(a),b(a,function(a){console.log("sendCommand callback...."),console.log("responseData: "+JSON.stringify(a))})}();break;default:console.log("widget {"+a+"} handler not found!")}},c.getCurrentStatus=function(b,c,d){switch(b){case"text":console.log(c),function(){a(function(a){var b=a.data;d({text:b[c][0]})})}();break;case"plug":console.log(c),function(){a(function(a){var b=a.data;d({on:0==b[c][0]?!1:!0})})}();break;case"led":!function(){a(function(a){var b=a.data[c];d({red:b[1],green:b[2],blue:b[3]})})}();break;case"illumination":console.log(c),function(){a(function(a){var b=a.data;d({illumination:b[c][0]})})}();break;case"air":console.log(c),function(){a(function(a){var b=a.data;d({mark:b[c][0]})})}();break;case"pm25":console.log(c),function(){a(function(a){var b=a.data;d({pm25:b[c][0]})})}();break;case"motor":console.log(c),function(){a(function(a){var b=a.data;d({speed:b[c][0]})})}();break;case"temperature":console.log(c),function(){a(function(a){var b=a.data;b[c]&&b[c].length&&b[c][0]>-99&&b[c][0]<99||(alert(c+"#temperature发生错误"),alert(c+" "+JSON.stringify(b))),d({temperature:b[c][0]})})}();break;case"humiture":console.log(c+"#humiture"),function(){a(function(a){var b=a.data;b[c]&&b[c].length&&b[c][0]>-99&&b[c][0]<101||(alert(c+"#humiture发生错误"),alert(c+" "+JSON.stringify(b))),d({humiture:b[c][0]})})}();break;case"thermohygrometer":console.log(c),function(){a(function(a){var b=a.data;d({temperature:b[c][0],humiture:b[c][1]})})}();break;case"default":console.log(c+"#default# getCurrentStatus"),function(){window.pando.getCurrentStatus(function(a){var b=a.data;b[c]&&b[c].length||(alert(c+"#default发生错误"),alert(c+" "+JSON.stringify(b)));var e={};for(var f in b[c])e["default"+f]=b[c][f];d(e)})}();break;default:console.log("widget {"+b+"} handler not found!")}},window.iotboard.setModel(c)}();